# Hello Mixing tank | [MAIN] | [NAMESPACES] | [METRICS] | [BACK]  

## Documentation for Function block GenericBistableDeviceModel  

```pascal
INTERFACE
    VAR_INPUT
        ActivateCmd : BOOL; (*Command to activate the device*)
        DeactivateCmd : BOOL; (*Command to deactivate the device*)
        cfgActTime : TIME; (*Time needed to activate the device*)
        cfgDeactTime : TIME; (*Time needed to deactivate the device*)
        simActFail : BOOL; (*Simulates activation fail. If deactivated and activate command true.*)
        simDeactFail : BOOL; (*Simulates deactivation fail. If activated and deactivate command true.*)
    END_VAR
    VAR_OUTPUT
        Activated : BOOL; (*TRUE: Device is activated*)
        Deactivated : BOOL; (*TRUE: Device is deactivated*)
    END_VAR
    VAR
        TransitionDelay : TON; (*Timer for delaying the commands to change state*)
        vState : USINT; (*State tracking variable*)
        vStateOld : USINT; (*Memory of previous state*)
    END_VAR
END_INTERFACE
FUNCTION_BLOCK GenericBistableDeviceModel:
    CASE vState OF
	0: (*Deactivated*)
		(*On entry do:*)
		IF vState <> vStateOld THEN
			(*Reset timer*)
			TransitionDelay(IN:=FALSE);
			vStateOld := vState;
		END_IF
		TransitionDelay(IN:=ActivateCmd AND NOT simActFail, PT:=cfgActTime);
		IF TransitionDelay.Q THEN
			vState := 1;
		END_IF
	1: (*Activated*)
		(*On entry do:*)
		IF vState <> vStateOld THEN
			(*Reset timer*)
			TransitionDelay(IN:=FALSE);
			vStateOld := vState;
		END_IF
		TransitionDelay(IN:=DeactivateCmd AND NOT simDeactFail, PT:=cfgDeactTime);
		IF TransitionDelay.Q THEN
			vState := 0;
		END_IF
END_CASE
Activated := vState = 1;
Deactivated := vState = 0;
END_FUNCTION_BLOCK
```

## Metrics  

| VAR_IN | VAR_OUT | VAR_IN_OUT | VAR_LOCAL | VAR_EXTERNAL | VAR_TEMP | Actions | Lines of code | Maintainable size |
| ------ | ------- | ---------- | --------- | ------------ | -------- | ------- | ------------- | ----------------- |
| 6 | 2 | 0 | 3 | 0 | 0 | 0 | 26 | 45 |  

---
Autogenerated with [ia_tools](https://github.com/tkucic/ia_tools)  

[MAIN]: ../../../../index_st.md
[NAMESPACES]: ../../nsList_st.md
[METRICS]: ../../../metrics_st.md
[BACK]: ../nsMain_st.md
